<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta name="author" content="Thomas Muguet" />

    <title>Leaflet.Polyline.Distance</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css" />

    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/leaflet/dist/leaflet.js"></script>
    <script src="dist/L.Polyline.Distance.min.js"></script>
  </head>

  <body>
    <div id="map" style="position: absolute; top:0px; left: 0px; bottom: 0px; right: 0px;"></div>

    <script>
      window.onload = function() {
        var map = L.map('map');

        var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
        var osmAttrib = 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors';
        var osm = new L.TileLayer(osmUrl, { attribution: osmAttrib });
        map.addLayer(osm);

        var pathGp = L.polyline(
          [
            [44.9874, 6.079484],
            [44.987389, 6.079513],
            [44.987415, 6.079532],
            [44.987602, 6.079668],
            [44.987839, 6.079794],
            [44.987922, 6.079855],
            [44.987922, 6.079855],
            [44.987982, 6.079802],
            [44.988061, 6.079794],
            [44.988179, 6.079805],
            [44.988245, 6.079796],
            [44.988296, 6.079695],
            [44.988426, 6.079362],
            [44.988544, 6.079201],
            [44.988768, 6.079111],
            [44.988831, 6.079016],
            [44.988777, 6.078788],
            [44.988662, 6.078523],
            [44.988601, 6.078367],
            [44.98856, 6.078209],
            [44.988528, 6.078066],
            [44.988495, 6.077877],
            [44.988452, 6.07774],
            [44.988452, 6.077597],
            [44.988399, 6.0774],
            [44.988384, 6.077257],
            [44.988384, 6.077257],
            [44.988387, 6.077105],
            [44.988296, 6.076987],
            [44.988296, 6.076987],
            [44.988138, 6.076772],
            [44.988051, 6.076738],
            [44.987886, 6.076694],
            [44.987797, 6.076618],
            [44.987455, 6.076066],
            [44.98714, 6.075665],
            [44.987076, 6.075617],
            [44.986941, 6.07559],
            [44.986822, 6.075589],
            [44.986709, 6.075583],
            [44.986709, 6.075583],
            [44.986283, 6.075616],
            [44.98571, 6.075617],
            [44.98513, 6.0755],
            [44.984828, 6.075415],
            [44.984655, 6.075324],
            [44.984411, 6.075165],
            [44.984126, 6.074807],
            [44.983794, 6.074771],
            [44.983356, 6.074586],
            [44.983128, 6.074231],
            [44.982865, 6.073783],
            [44.982432, 6.073468],
            [44.981945, 6.07307],
            [44.98163, 6.072814],
            [44.981342, 6.072574],
            [44.981155, 6.07234],
            [44.980939, 6.072159],
            [44.98081, 6.072151],
            [44.980621, 6.072139],
            [44.980621, 6.072139],
            [44.980533, 6.072224],
            [44.980413, 6.072135],
            [44.980367, 6.072157],
            [44.980309, 6.07225],
            [44.98024, 6.072319],
            [44.980208, 6.072247],
            [44.980211, 6.072183],
            [44.980141, 6.072242],
            [44.980041, 6.07225],
            [44.980023, 6.072216],
            [44.979862, 6.072288],
            [44.979699, 6.072317],
            [44.979615, 6.072329],
            [44.979557, 6.072391],
            [44.979451, 6.072443],
            [44.97932, 6.072506],
            [44.979202, 6.072545],
            [44.979148, 6.072555],
            [44.979125, 6.072514],
            [44.979153, 6.072432],
            [44.979173, 6.072367],
            [44.979252, 6.072262],
            [44.979268, 6.072184],
            [44.979241, 6.072081],
            [44.979213, 6.072016],
            [44.979185, 6.072],
            [44.97911, 6.072049],
            [44.978907, 6.072008],
            [44.978758, 6.071829],
            [44.978753, 6.071763],
            [44.978764, 6.071645],
            [44.978692, 6.071692],
            [44.978634, 6.071722],
            [44.97856, 6.071823],
            [44.978456, 6.071919],
            [44.978464, 6.071693],
            [44.978487, 6.071526],
            [44.978398, 6.071601],
            [44.978252, 6.071801],
            [44.978181, 6.07154],
            [44.978121, 6.071334],
            [44.977996, 6.071035],
            [44.977919, 6.070784],
            [44.977839, 6.070621],
            [44.977778, 6.070814],
            [44.977737, 6.070717],
            [44.977631, 6.070949],
            [44.977503, 6.071186],
            [44.977383, 6.071241],
            [44.97737, 6.071091],
            [44.977271, 6.071271],
            [44.977189, 6.071357],
            [44.977148, 6.071267],
            [44.977184, 6.071034],
            [44.977197, 6.070851],
            [44.977189, 6.07069],
            [44.977121, 6.070513],
            [44.97706, 6.070616],
            [44.976981, 6.070704],
            [44.976729, 6.070729],
            [44.976579, 6.07095],
            [44.976428, 6.071167],
            [44.976294, 6.07145],
            [44.976167, 6.071585],
            [44.97601, 6.071838],
            [44.975967, 6.071694],
            [44.975925, 6.071494],
            [44.975898, 6.071475],
            [44.975875, 6.071551],
            [44.975867, 6.071669],
            [44.975814, 6.07173],
            [44.975713, 6.071669],
            [44.975652, 6.071582],
            [44.97549, 6.07148],
            [44.975408, 6.07147],
            [44.975319, 6.071526],
            [44.975252, 6.071581],
            [44.975191, 6.071671],
            [44.975049, 6.071751],
            [44.97485, 6.0718],
            [44.974739, 6.071775],
            [44.974603, 6.071774],
            [44.974549, 6.071731],
            [44.974537, 6.071686],
            [44.974583, 6.071594],
            [44.974592, 6.071485],
            [44.974668, 6.071393],
            [44.974727, 6.071235],
            [44.974703, 6.071144],
            [44.974665, 6.07109],
            [44.974574, 6.071032],
            [44.974439, 6.070816],
            [44.974359, 6.070655],
            [44.974269, 6.070549],
            [44.974215, 6.07055],
            [44.974154, 6.070447],
            [44.97392, 6.070273],
            [44.973835, 6.070185],
            [44.973811, 6.070107],
            [44.973707, 6.069932],
            [44.973579, 6.069769],
            [44.973469, 6.069698],
            [44.973253, 6.069625],
            [44.973208, 6.069595],
            [44.973077, 6.069507],
            [44.972825, 6.069347],
            [44.97281, 6.069329],
            [44.972813, 6.069324],
          ],
          {
            color: '#00FF00',
            opacity: 0.5,
          }
        ).addTo(map);

        var pathOsm = L.polyline(
          [
            [44.98725, 6.07937],
            [44.98724, 6.07938],
            [44.98727, 6.07941],
            [44.98759, 6.07966],
            [44.98796, 6.07989],
            [44.98802, 6.07982],
            [44.98819, 6.07981],
            [44.98825, 6.07976],
            [44.98836, 6.07949],
            [44.98844, 6.07935],
            [44.98852, 6.07925],
            [44.98868, 6.07914],
            [44.98873, 6.07914],
            [44.9888, 6.0791],
            [44.98885, 6.07901],
            [44.98884, 6.07892],
            [44.98877, 6.07869],
            [44.98872, 6.07856],
            [44.98856, 6.07831],
            [44.98854, 6.07817],
            [44.98854, 6.07795],
            [44.98847, 6.07775],
            [44.98846, 6.07761],
            [44.98848, 6.07756],
            [44.98844, 6.07739],
            [44.98841, 6.07735],
            [44.98831, 6.07703],
            [44.98826, 6.07691],
            [44.98819, 6.07682],
            [44.98815, 6.07678],
            [44.98787, 6.0767],
            [44.98779, 6.07662],
            [44.98771, 6.07641],
            [44.98771, 6.0764],
            [44.98768, 6.07631],
            [44.98741, 6.07615],
            [44.98714, 6.07564],
            [44.98701, 6.07559],
            [44.98664, 6.07557],
            [44.98642, 6.07564],
            [44.98619, 6.07568],
            [44.98586, 6.07564],
            [44.98574, 6.07555],
            [44.9857, 6.07557],
            [44.98563, 6.07554],
            [44.98544, 6.07553],
            [44.98536, 6.07549],
            [44.98523, 6.07546],
            [44.98501, 6.07548],
            [44.98475, 6.07538],
            [44.98452, 6.07524],
            [44.98435, 6.0751],
            [44.98429, 6.075],
            [44.98426, 6.07491],
            [44.9842, 6.07486],
            [44.98391, 6.07476],
            [44.9839, 6.07476],
            [44.98378, 6.07474],
            [44.98365, 6.07458],
            [44.98345, 6.07455],
            [44.98331, 6.07441],
            [44.98315, 6.07429],
            [44.98296, 6.07427],
            [44.98286, 6.07393],
            [44.98269, 6.07371],
            [44.98254, 6.07342],
            [44.98238, 6.0733],
            [44.9821, 6.07304],
            [44.98201, 6.07304],
            [44.98194, 6.07299],
            [44.98178, 6.07293],
            [44.98163, 6.07279],
            [44.98164, 6.0727],
            [44.98158, 6.07257],
            [44.98149, 6.07259],
            [44.98145, 6.07267],
            [44.98141, 6.07258],
            [44.98137, 6.07264],
            [44.98132, 6.07258],
            [44.9813, 6.07264],
            [44.98127, 6.07265],
            [44.9812, 6.07259],
            [44.98117, 6.07263],
            [44.98113, 6.07261],
            [44.98107, 6.07264],
            [44.98102, 6.07263],
            [44.981, 6.07259],
            [44.981, 6.07248],
            [44.98102, 6.07224],
            [44.981, 6.0722],
            [44.98063, 6.07208],
            [44.98053, 6.07226],
            [44.98033, 6.07228],
            [44.98022, 6.07241],
            [44.98017, 6.07235],
            [44.98018, 6.07221],
            [44.98007, 6.07227],
            [44.97997, 6.07226],
            [44.98, 6.07221],
            [44.97977, 6.07227],
            [44.97958, 6.0724],
            [44.97958, 6.0724],
            [44.97933, 6.07256],
            [44.97927, 6.07257],
            [44.97926, 6.07249],
            [44.97914, 6.07255],
            [44.97915, 6.07238],
            [44.97925, 6.07224],
            [44.97927, 6.07217],
            [44.97928, 6.07211],
            [44.97925, 6.07205],
            [44.97918, 6.07202],
            [44.97912, 6.07209],
            [44.97908, 6.07211],
            [44.97905, 6.07208],
            [44.97901, 6.07207],
            [44.97893, 6.07201],
            [44.97883, 6.07208],
            [44.97879, 6.0719],
            [44.9787, 6.07181],
            [44.97872, 6.07171],
            [44.9785, 6.07184],
            [44.97842, 6.0717],
            [44.97845, 6.07157],
            [44.97822, 6.07178],
            [44.97815, 6.07171],
            [44.97814, 6.0716],
            [44.97818, 6.07155],
            [44.97808, 6.07129],
            [44.97792, 6.07109],
            [44.9779, 6.07083],
            [44.97782, 6.07067],
            [44.97779, 6.0708],
            [44.97772, 6.07076],
            [44.97764, 6.07088],
            [44.97763, 6.07114],
            [44.97753, 6.07135],
            [44.9774, 6.07127],
            [44.9774, 6.07135],
            [44.97733, 6.07131],
            [44.9773, 6.07116],
            [44.97717, 6.07136],
            [44.97716, 6.07093],
            [44.97714, 6.07074],
            [44.9771, 6.07066],
            [44.97706, 6.07064],
            [44.97696, 6.07074],
            [44.97691, 6.07072],
            [44.97675, 6.07074],
            [44.97645, 6.07113],
            [44.9764, 6.07138],
            [44.97623, 6.07158],
            [44.97611, 6.07198],
            [44.97606, 6.07199],
            [44.97598, 6.07189],
            [44.97595, 6.07166],
            [44.97589, 6.07179],
            [44.97585, 6.07171],
            [44.97581, 6.07176],
            [44.9758, 6.07179],
            [44.9758, 6.07176],
            [44.97569, 6.07167],
            [44.97566, 6.07159],
            [44.97543, 6.07145],
            [44.97535, 6.0715],
            [44.97531, 6.07157],
            [44.97525, 6.07158],
            [44.97518, 6.0717],
            [44.97515, 6.0717],
            [44.97515, 6.0717],
            [44.97507, 6.07175],
            [44.97481, 6.0718],
            [44.97459, 6.07178],
            [44.97455, 6.07174],
            [44.97454, 6.07165],
            [44.97458, 6.07162],
            [44.97466, 6.07153],
            [44.9747, 6.07139],
            [44.97474, 6.07113],
            [44.9746, 6.07105],
            [44.97455, 6.071],
            [44.97451, 6.0709],
            [44.97446, 6.07086],
            [44.97436, 6.07064],
            [44.97427, 6.07057],
            [44.97422, 6.07057],
            [44.97416, 6.07044],
            [44.97405, 6.0704],
            [44.97379, 6.07011],
            [44.97357, 6.0698],
            [44.97332, 6.06965],
            [44.97317, 6.06959],
            [44.97303, 6.06946],
            [44.97282, 6.06935],
            [44.97282, 6.06936],
          ],
          {
            color: '#0000FF',
            opacity: 0.5,
          }
        ).addTo(map);

        map.fitBounds(pathGp.getBounds());

        var p = L.polygon(pathGp.getLatLngs().concat(pathOsm.getLatLngs().reverse()));
        p.setStyle({ stroke: false, fillColor: '#FF0000' }).addTo(map);

        var distance = pathGp.distanceTo(pathOsm, undefined, true);

        p.bindPopup(
          'Distance ' +
            Math.round(distance[0] * 100) / 100 +
            'm<br>(area: ' +
            Math.round(distance[1] * 100) / 100 +
            'm<sup>2</sup>; length: ' +
            Math.round(distance[2] * 100) / 100 +
            'm)'
        ).openPopup();
      };
    </script>
  </body>
</html>
